(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const c="/tester-a11y",h="Démo accessibilité numérique";window.onload=()=>{o("components/main/main.html").then(r=>{document.querySelector("#app").innerHTML=r,p()})};function p(){customElements.define("router-outlet",y),customElements.define("router-link",v),customElements.define("custom-header",f),customElements.define("custom-footer",b),customElements.define("custom-picture",g),customElements.define("custom-alert",q)}class f extends HTMLElement{async connectedCallback(){this.innerHTML=await o("components/header/header.html"),this.initTheme(),m()}initTheme(){const e=localStorage.getItem("theme");e?this.setTheme(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?this.setTheme("dark"):this.setTheme("light");const t=document.getElementById("btnLight");t&&(t.onclick=()=>this.setTheme("light"));const s=document.getElementById("btnDark");s&&(s.onclick=()=>this.setTheme("dark"))}setTheme(e){var t=document.querySelectorAll(".theme-switcher-buttons button");t.forEach(s=>{s.getAttribute("data-theme")===e?s.setAttribute("aria-pressed",!0):s.setAttribute("aria-pressed",!1)}),document.documentElement.setAttribute("data-selected-theme",e),localStorage.setItem("theme",e)}}class b extends HTMLElement{async connectedCallback(){this.innerHTML=await o("components/footer/footer.html")}}class g extends HTMLElement{constructor(){super()}connectedCallback(){let e=document.createElement("img");e.alt=this.attributes.alt.value,e.src=this.attributes.src.value,e.setAttribute("lazy","loading"),this.attributes.style&&(e.style=this.attributes.style.value),this.attributes.class&&this.attributes.class.value.split(" ").forEach(t=>{e.classList.add(t)}),this.appendChild(e)}}class y extends HTMLElement{constructor(){super(),window.addEventListener("popstate",()=>this.handleRoute())}async connectedCallback(){await this.handleRoute()}async handleRoute(){const e=window.location.pathname.replace(c,"");let t="",s="";switch(e){case"/":s="pages/accueil.html",t="Accueil";break;case"/cas-pratique-1":s="pages/cas-pratique-1.html",t="Cas pratique n°1 : les contrastes";break;case"/cas-pratique-2":s="pages/cas-pratique-2.html",t="Cas pratique n°2 : la langue";break;case"/cas-pratique-3":s="pages/cas-pratique-3.html",t="Cas pratique n°3 : les images";break;case"/cas-pratique-4":s="pages/cas-pratique-4.html",t="Cas pratique n°4 : le formulaire";break;case"/cas-pratique-5":s="pages/cas-pratique-5.html",t="Cas pratique n°5 : les liens";break;case"/cas-pratique-6":s="pages/cas-pratique-6.html",t="Cas pratique n°6 : les boutons";break;case"/ci-cd":s="pages/ci-cd.html",t="Tests automatisés";break;case"/bonus":s="pages/bonus.html",t="Bonus";break;case"/faq":s="pages/faq.html",t="Foire aux questions";break;case"/ressources":s="pages/ressources.html",t="Ressources";break;case"/a-propos":s="pages/a-propos.html",t="A propos";break;default:s="pages/erreur.html",t="Erreur 404"}this.innerHTML=await o(s),document.title=`${t} - ${h}`,this.initJavascript(e),this.setCurrentPage(document.title)}setCurrentPage(e){document.getElementById("title-page").innerHTML=e}async navigate(e){window.history.pushState({},"",e),await this.handleRoute()}initJavascript(e){e==="/cas-pratique-3"&&document.getElementById("show-button").addEventListener("click",t=>{E(".images");const s=t.target;document.querySelector(".hidden")!==null?s.innerText="Afficher les images":s.innerText="Cacher les images"}),e==="/cas-pratique-4"&&document.getElementById("btnSubmit").addEventListener("click",()=>{const t=document.querySelectorAll(["input","textarea"]);let s=!1;for(const a of t)a.value!==""?(a.classList.contains("valid")||a.classList.add("valid"),a.ariaInvalid=!1,a.classList.remove("invalid")):(s=!0,a.classList.contains("invalid")||a.classList.add("invalid"),a.ariaInvalid=!0,a.classList.remove("valid"));if(s){u("error","Vos champs ne sont pas tous remplis !");const a=document.querySelector("[aria-invalid=true]");a&&a.focus()}else u("success","Bravo, tous vos champs sont remplis !")})}}async function o(r){const e=await fetch(`${c}/${r}`);if(!e.ok)throw new Error("Erreur lors du chargement du fichier HTML : "+e.statusText);return await e.text()}function L(r){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=`${c}/${r}`,document.head.appendChild(e)}function m(){document.querySelectorAll("router-link").forEach(e=>{let t=e.querySelector("a");window.location.pathname.replace(c,"")===e.attributes.href.value?(t.setAttribute("aria-current","page"),t.classList.add("active")):(t.removeAttribute("aria-current"),t.classList.remove("active")),t.addEventListener("click",()=>{m()})})}class v extends HTMLElement{constructor(){super()}connectedCallback(){const e=document.createElement("a"),t=c+this.attributes.href.value;e.href=t,e.text=this.attributes.title.value,e.onclick=s=>{s.preventDefault(),document.querySelector("router-outlet").navigate(t)},this.appendChild(e)}}function E(r){const e=document.querySelector(r);e&&(e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"))}class q extends HTMLElement{async connectedCallback(){L("components/alert/alert.scss"),this.innerHTML=await o("components/alert/alert.html")}}function u(r,e){let t="",s="";switch(r){case"info":t="fa-circle-info",s="info";break;case"success":t="fa-circle-check",s="success";break;case"error":t="fa-circle-exclamation",s="error";break;default:return}const a=document.querySelector(".alert");if(!a)throw new Error("Le composant alert n'est pas défini");a.classList.add("display"),a.classList.add(s);const i=a.querySelector("i");i&&i.classList.add(t);const n=a.querySelector(".alert-title");n&&(n.innerText=e);const l=a.querySelector("button");l&&l.addEventListener("click",()=>d(s,t)),setTimeout(()=>d(s,t),1500)}function d(r,e){const t=document.querySelector(".alert");if(!t)throw new Error("Le composant alert n'est pas défini");t.classList.remove("display"),t.classList.remove(r);const s=t.querySelector("i");s&&s.classList.remove(e);const a=t.querySelector(".alert-title");a&&(a.innerText="");const i=t.querySelector("button");i&&i.removeEventListener("click",i)}
